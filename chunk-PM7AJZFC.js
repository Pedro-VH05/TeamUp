import{$ as me,A as s,Aa as xe,B as o,Ba as Me,C as O,D as z,Da as E,E as L,Ea as J,F as b,Fa as w,G as m,Ga as Pe,H as d,Ha as U,I as c,Ia as K,J as y,Ja as Oe,K as C,L as re,La as D,M as H,Ma as k,N as Z,Na as be,O as Y,Pa as M,Q as S,Qa as X,R as G,S as R,T as se,U as ae,V as ce,W as le,X as de,Xa as ye,Y as pe,Z as ge,a as $,b as A,ba as fe,d as v,da as _e,fa as ue,g as I,h as q,ha as Ce,j as T,ja as he,k as ee,l as _,m as u,n as te,o as ne,p as ie,q as N,r as a,t as oe,ta as ve,u as g,v as p,w as F,x as P,y as Q,z as W,za as B}from"./chunk-VYGVAKLG.js";var ke=(n,t)=>t.id;function Se(n,t){if(n&1){let e=b();s(0,"div",24),m("click",function(){let r=_(e).$implicit,l=d(2);return u(l.viewProfile(r.id))}),O(1,"img",25),s(2,"span"),c(3),o(),s(4,"span",26),c(5),o()()}if(n&2){let e=t.$implicit,i=d(2);a(),p("src",i.getProfileImage(e),N),a(2),y(i.getDisplayName(e)),a(2),y(e.type==="player"?"Jugador":"Club")}}function Ie(n,t){if(n&1&&(s(0,"div",22),g(1,Se,6,3,"div",23),o()),n&2){let e=d();a(),p("ngForOf",e.searchResults)}}function Te(n,t){if(n&1){let e=b();s(0,"div",31),m("click",function(r){return _(e),u(r.stopPropagation())}),s(1,"div",32),m("click",function(r){_(e);let l=d(2);return l.viewProfile(l.currentUser.uid),u(r.stopPropagation())}),s(2,"span",33),O(3,"i",34),o(),s(4,"span"),c(5,"Ver mi perfil"),o()(),s(6,"div",32),m("click",function(r){return _(e),d(2).logout(),u(r.stopPropagation())}),s(7,"span",33),O(8,"i",35),o(),s(9,"span"),c(10,"Cerrar sesi\xF3n"),o()()()}}function Ue(n,t){if(n&1){let e=b();s(0,"div",27),m("click",function(r){_(e);let l=d();return u(l.toggleProfileMenu(r))}),O(1,"img",28),s(2,"span",29),c(3),o(),g(4,Te,11,0,"div",30),o()}if(n&2){let e=d();a(),p("src",e.getProfileImage(e.currentUser),N),a(2),C(" ",e.getDisplayName(e.currentUser)," "),a(),p("ngIf",e.showProfileMenu)}}function De(n,t){if(n&1&&(s(0,"span",44),c(1),S(2,"date"),o()),n&2){let e=d().$implicit;a(),y(R(2,1,e.lastMessageTime.toDate(),"shortTime"))}}function Ve(n,t){if(n&1&&(s(0,"span",45),c(1),o()),n&2){let e=d().$implicit;a(),y(e.unreadCount)}}function Ne(n,t){if(n&1){let e=b();s(0,"div",38),m("click",function(){let r=_(e).$implicit,l=d(2);return u(l.selectConversation(r.id))}),O(1,"img",39),s(2,"div",40)(3,"span",41),c(4),o(),s(5,"span",42),c(6),S(7,"slice"),o()(),s(8,"div",43),g(9,De,3,4,"span",44)(10,Ve,2,1,"span",45),o()()}if(n&2){let e=t.$implicit,i=d(2);F("selected",i.selectedConversation===e.id),a(),p("src",e.userPhoto,N),a(3),y(e.userName),a(2),re("",se(7,8,e.lastMessage,0,30),"",e.lastMessage.length>30?"...":"",""),a(3),P(e.lastMessageTime?9:-1),a(),P(e.unreadCount>0?10:-1)}}function Fe(n,t){n&1&&(s(0,"p",37),c(1,"No tienes conversaciones"),o())}function ze(n,t){n&1&&Q(0,Ne,11,12,"div",36,ke,!1,Fe,2,0,"p",37),n&2&&W(t)}function Le(n,t){n&1&&(s(0,"p",17),c(1,"Cargando conversaciones..."),o())}function Re(n,t){if(n&1&&(s(0,"div",51),c(1),o()),n&2){let e=d().$implicit;a(),C(" ",e.dateHeader," ")}}function Be(n,t){if(n&1&&(z(0),O(1,"i",56),L()),n&2){let e=d(2).$implicit;a(),F("double",(e.seenBy==null?null:e.seenBy.length)>1)}}function je(n,t){if(n&1&&(s(0,"span",54),c(1),S(2,"date"),g(3,Be,2,2,"ng-container",55),o()),n&2){let e=d().$implicit,i=d(3);a(),C(" ",R(2,2,e.timestamp.toDate(),"shortTime")," "),a(2),p("ngIf",e.senderId===(i.currentUser==null?null:i.currentUser.uid))}}function $e(n,t){if(n&1&&(g(0,Re,2,1,"div",51),s(1,"div",52)(2,"div",53)(3,"p"),c(4),o(),g(5,je,4,5,"span",54),o()()),n&2){let e=t.$implicit,i=d(3);P(e.dateHeader?0:-1),a(),F("sent",e.senderId===(i.currentUser==null?null:i.currentUser.uid)),a(3),y(e.text),a(),P(e.timestamp?5:-1)}}function Ae(n,t){n&1&&(s(0,"div",47),Q(1,$e,6,5,null,null,ke),o()),n&2&&(a(),W(t))}function qe(n,t){n&1&&(s(0,"p",17),c(1,"Cargando mensajes..."),o())}function Qe(n,t){if(n&1){let e=b();s(0,"div",46),g(1,Ae,3,0,"div",47),S(2,"async"),g(3,qe,2,0,"p",17),s(4,"div",48)(5,"input",49),Y("ngModelChange",function(r){_(e);let l=d();return Z(l.newMessage,r)||(l.newMessage=r),u(r)}),m("keyup.enter",function(){_(e);let r=d();return u(r.sendMessage())}),o(),s(6,"button",50),m("click",function(){_(e);let r=d();return u(r.sendMessage())}),c(7,"Enviar"),o()()()}if(n&2){let e,i=d();a(),P((e=G(2,2,i.messages$))?1:3,e),a(4),H("ngModel",i.newMessage)}}function We(n,t){n&1&&(s(0,"div",19)(1,"p"),c(2,"Selecciona una conversaci\xF3n para comenzar a chatear"),o()())}function He(n,t){n&1&&(s(0,"p"),c(1,"Creando nueva conversaci\xF3n..."),o())}function Ze(n,t){n&1&&(s(0,"p"),c(1,"No se pudo crear la conversaci\xF3n"),o())}function Ye(n,t){if(n&1&&(s(0,"div",19),g(1,He,2,0,"p")(2,Ze,2,0,"p"),o()),n&2){let e=d();a(),P(e.isLoading?1:2)}}function Ge(n,t){n&1&&(s(0,"div",63),O(1,"div",64),s(2,"p"),c(3,"Cargando perfil..."),o()())}function Je(n,t){if(n&1&&(z(0),s(1,"p")(2,"strong"),c(3,"Usuario:"),o(),c(4," Jugador"),o(),s(5,"p")(6,"strong"),c(7,"Posici\xF3n:"),o(),c(8),o(),s(9,"p")(10,"strong"),c(11,"Experiencia:"),o(),c(12),o(),s(13,"p")(14,"strong"),c(15,"Fecha de nacimiento:"),o(),c(16),S(17,"date"),o(),s(18,"p")(19,"strong"),c(20,"\xBFBuscando equipo actualmente?:"),o(),c(21),o(),L()),n&2){let e=d(3);a(8),C(" ",e.selectedProfile.position,""),a(4),C(" ",e.selectedProfile.experienceYears," a\xF1o(s)"),a(4),C(" ",R(17,4,e.selectedProfile.birthDate,"longDate"),""),a(5),C(" ",e.selectedProfile.lookingForTeam?"S\xED":"No","")}}function Ke(n,t){if(n&1&&(s(0,"p")(1,"strong"),c(2,"Nombre del equipo:"),o(),c(3),o()),n&2){let e=d().$implicit;a(3),C(" ",e.teamName,"")}}function Xe(n,t){if(n&1&&(s(0,"div",73)(1,"p")(2,"strong"),c(3,"Categor\xEDa de edad:"),o(),c(4),o(),s(5,"p")(6,"strong"),c(7,"G\xE9nero:"),o(),c(8),o(),g(9,Ke,4,1,"p",55),o()),n&2){let e=t.$implicit;a(4),C(" ",e.ageCategory,""),a(4),C(" ",e.gender,""),a(),p("ngIf",e.teamName)}}function et(n,t){if(n&1&&(s(0,"div")(1,"h3"),c(2,"Categor\xEDas del Club"),o(),s(3,"div",71),g(4,Xe,10,3,"div",72),o()()),n&2){let e=d(4);a(4),p("ngForOf",e.selectedProfile.categories)}}function tt(n,t){if(n&1&&(z(0),s(1,"p")(2,"strong"),c(3,"Usuario:"),o(),c(4," Club deportivo"),o(),s(5,"p")(6,"strong"),c(7,"Localizaci\xF3n:"),o(),c(8),o(),s(9,"p")(10,"strong"),c(11,"Provincia:"),o(),c(12),o(),g(13,et,5,1,"div",55),L()),n&2){let e=d(3);a(8),C(" ",e.selectedProfile.address,""),a(4),C(" ",e.selectedProfile.province,""),a(),p("ngIf",(e.selectedProfile.categories==null?null:e.selectedProfile.categories.length)>0)}}function nt(n,t){if(n&1){let e=b();s(0,"button",74),m("click",function(){_(e);let r=d(3);return u(r.navigateToMessages(r.selectedProfile.uid))}),c(1," Enviar mensaje "),o()}}function it(n,t){if(n&1){let e=b();s(0,"button",75),m("click",function(){_(e);let r=d(3);return u(r.deleteUser(r.selectedProfile.uid))}),c(1," Eliminar usuario "),o()}}function ot(n,t){if(n&1&&(s(0,"div",65),O(1,"img",66),s(2,"h2",67),c(3),o(),s(4,"p",68)(5,"strong"),c(6,"Deporte:"),o(),c(7),o(),g(8,Je,22,7,"ng-container",55)(9,tt,14,3,"ng-container",55)(10,nt,2,0,"button",69)(11,it,2,0,"button",70),o()),n&2){let e=d(2);a(),p("src",e.getProfileImage(e.selectedProfile),N),a(2),y(e.getDisplayName(e.selectedProfile)),a(4),C(" ",e.selectedProfile.sport||"No especificado",""),a(),p("ngIf",e.selectedProfile.type==="player"),a(),p("ngIf",e.selectedProfile.type==="team"),a(),p("ngIf",(e.currentUser==null?null:e.currentUser.uid)!==e.selectedProfile.uid),a(),p("ngIf",e.shouldShowDeleteButton(e.selectedProfile))}}function rt(n,t){if(n&1&&(s(0,"div",76),c(1),o()),n&2){let e=d(2);a(),C(" ",e.profileError," ")}}function st(n,t){if(n&1){let e=b();s(0,"div",57),m("click",function(){_(e);let r=d();return u(r.closeProfileModal())}),s(1,"div",58),m("click",function(r){return _(e),u(r.stopPropagation())}),s(2,"button",59),m("click",function(){_(e);let r=d();return u(r.closeProfileModal())}),c(3,"\xD7"),o(),g(4,Ge,4,0,"div",60)(5,ot,12,7,"div",61)(6,rt,2,1,"div",62),o()()}if(n&2){let e=d();a(4),p("ngIf",e.isLoadingProfile),a(),p("ngIf",!e.isLoadingProfile&&e.selectedProfile),a(),p("ngIf",e.profileError)}}function at(n,t){if(n&1){let e=b();s(0,"div",77)(1,"div",78),m("click",function(r){return _(e),u(r.stopPropagation())}),s(2,"h3"),c(3),o(),s(4,"p"),c(5),o(),s(6,"div",79)(7,"button",80),m("click",function(){_(e);let r=d();return u(r.cancelAction())}),c(8,"Cancelar"),o(),s(9,"button",81),m("click",function(){_(e);let r=d();return u(r.confirmAction())}),c(10,"Confirmar"),o()()()()}if(n&2){let e=d();a(3),y(e.confirmationTitle),a(2),y(e.confirmationMessage)}}var we=class n{firestore=T(Me);authService=T(ye);router=T(fe);route=T(me);routeSub;clickListener;injector=T(ie);currentUser;conversations$;selectedConversation=null;messages$;newMessage="";recipientId=null;isLoading=!1;showProfileMenu=!1;showProfileModal=!1;selectedProfile=null;isLoadingProfile=!1;profileError=null;conversationRecipientId;showConfirmationModal=!1;confirmationTitle="";confirmationMessage="";currentAction=null;actionPayload=null;searchQuery="";searchResults=[];isSearching=!1;searchError=null;ngOnInit(){this.routeSub=this.route.queryParams.subscribe(t=>{this.recipientId=t.recipient||null,this.recipientId&&this.currentUser&&this.findOrCreateConversation(this.currentUser.uid,this.recipientId)}),this.authService.currentUser$.subscribe(t=>{t&&(this.currentUser=t,this.loadConversations(t.uid,t.sport),this.recipientId&&this.findOrCreateConversation(t.uid,this.recipientId))}),this.clickListener=()=>this.showProfileMenu=!1,document.addEventListener("click",this.clickListener)}ngOnDestroy(){this.routeSub?.unsubscribe(),document.removeEventListener("click",this.clickListener)}findOrCreateConversation(t,e){return v(this,null,function*(){this.isLoading=!0;try{let i=w(this.firestore,"conversations"),r=k(i,M("participants","array-contains",t)),f=(yield I(E(r,{idField:"id"}))).find(h=>h.participants.includes(e));f?this.selectConversation(f.id):yield this.createNewConversation(t,e)}catch(i){console.error("Error finding or creating conversation:",i)}finally{this.isLoading=!1}})}createNewConversation(t,e){return v(this,null,function*(){try{let r=(yield K(U(this.firestore,"users",e))).data(),l={participants:[t,e],participantNames:{[t]:this.getDisplayName(this.currentUser),[e]:r?this.getDisplayName(r):"Usuario"},participantPhotos:{[t]:this.getProfileImage(this.currentUser),[e]:r?this.getProfileImage(r):"assets/user-profile.jpg"},lastMessage:"",lastMessageTime:null,unreadCounts:{[t]:0,[e]:0},sport:this.currentUser.sport,createdAt:B()},f=w(this.firestore,"conversations"),h=yield J(f,l);this.selectConversation(h.id)}catch(i){throw console.error("Error creating new conversation:",i),i}})}loadConversations(t,e){let i=w(this.firestore,"conversations");this.conversations$=E(k(i,M("participants","array-contains",t),M("sport","==",e)),{idField:"id"}).pipe(q(r=>r.map(l=>{let f=l.participants.find(h=>h!==t);return{id:l.id,userId:f,userName:l.participantNames?.[f]||"Usuario",userPhoto:l.participantPhotos?.[f]||"assets/user-profile.jpg",lastMessage:l.lastMessage||"",lastMessageTime:l.lastMessageTime,unreadCount:l.unreadCounts?.[t]||0}})))}selectConversation(t){return v(this,null,function*(){this.selectedConversation=t,this.recipientId=null;let e=w(this.firestore,"conversations",t,"messages");this.messages$=E(k(e,D("timestamp","asc")),{idField:"id"}).pipe(q(i=>{let r="";return i.map(l=>{let f=l.timestamp?.toDate(),h=f?this.formatMessageDate(f):"";return h&&h!==r?(r=h,A($({},l),{dateHeader:h})):l})})),this.conversations$?.subscribe(i=>{let r=i.find(l=>l.id===t);r&&(this.conversationRecipientId=r.userId)}),this.markMessagesAsSeen(t)})}formatMessageDate(t){let e={day:"numeric",month:"long"};return t.toLocaleDateString("es-ES",e)}sendMessage(){return v(this,null,function*(){if(!this.newMessage.trim()||!this.selectedConversation||!this.currentUser)return;let t=this.newMessage;this.newMessage="";try{let e={text:t,senderId:this.currentUser.uid,senderName:this.getDisplayName(this.currentUser),senderPhoto:this.getProfileImage(this.currentUser),timestamp:B(),sport:this.currentUser.sport,seenBy:[this.currentUser.uid]},i=w(this.firestore,"conversations",this.selectedConversation,"messages");yield J(i,e);let r=U(this.firestore,"conversations",this.selectedConversation);yield be(r,{lastMessage:t,lastMessageTime:B()},{merge:!0}),this.newMessage=""}catch(e){console.error("Error sending message:",e)}})}deleteUser(t){this.showConfirmation("Eliminar usuario","\xBFEst\xE1s seguro de que quieres eliminar este usuario y todo su contenido? Esta acci\xF3n no se puede deshacer.","deleteUser",t)}onSearchInput(){return v(this,null,function*(){if(!this.searchQuery.trim()){this.searchResults=[];return}this.isSearching=!0,this.searchError=null;try{let t=this.searchQuery.toLowerCase().trim();yield ee(this.injector,()=>v(this,null,function*(){let e=w(this.firestore,"users"),i,r;if(this.currentUser.type==="admin")i=k(e,M("type","==","player"),D("firstName")),r=k(e,M("type","==","team"),D("teamName"));else{let x=this.currentUser.sport;if(!x){this.searchResults=[];return}i=k(e,M("type","==","player"),M("sport","==",x),D("firstName")),r=k(e,M("type","==","team"),M("sport","==",x),D("teamName"))}let l=yield I(E(i,{idField:"id"})),f=yield I(E(r,{idField:"id"})),h=[...l,...f];this.searchResults=h.filter(x=>x.type==="player"?`${x.firstName} ${x.lastName}`.toLowerCase().includes(t):x.teamName.toLowerCase().includes(t)).sort((x,V)=>{let j=this.getDisplayName(x).toLowerCase(),Ee=this.getDisplayName(V).toLowerCase();return j.localeCompare(Ee)})}))}catch(t){console.error("Error en b\xFAsqueda:",t),this.searchError="Error al realizar la b\xFAsqueda",this.searchResults=[]}finally{this.isSearching=!1}})}showConfirmation(t,e,i,r){this.confirmationTitle=t,this.confirmationMessage=e,this.currentAction=i,this.actionPayload=r,this.showConfirmationModal=!0}cancelAction(){this.showConfirmationModal=!1,this.currentAction=null,this.actionPayload=null}confirmAction(){return v(this,null,function*(){this.currentAction==="deleteUser"&&(yield this.deleteUserConfirmed(this.actionPayload)),this.showConfirmationModal=!1})}deleteUserConfirmed(t){return v(this,null,function*(){try{let e=w(this.firestore,"conversations"),i=k(e,M("participants","array-contains",t)),l=(yield I(E(i,{idField:"id"}))).map(f=>v(this,null,function*(){let h=w(this.firestore,"conversations",f.id,"messages"),x=yield I(E(h,{idField:"id"})),V=X(this.firestore);x.forEach(j=>{V.delete(U(this.firestore,"conversations",f.id,"messages",j.id))}),yield V.commit(),yield Pe(U(this.firestore,"conversations",f.id))}));yield Promise.all(l),this.closeProfileModal(),this.currentUser&&this.loadConversations(this.currentUser.uid,this.currentUser.sport),console.log("Usuario y conversaciones eliminadas con \xE9xito")}catch(e){console.error("Error al eliminar usuario y conversaciones:",e)}})}shouldShowDeleteButton(t){return this.currentUser?.type==="admin"&&this.currentUser?.uid!==t.uid}toggleProfileMenu(t){t.stopPropagation(),this.showProfileMenu=!this.showProfileMenu}viewProfile(t){return v(this,null,function*(){this.showProfileMenu=!1,this.isLoadingProfile=!0,this.profileError=null,this.showProfileModal=!0;try{let e=U(this.firestore,"users",t),i=yield K(e);i.exists()?this.selectedProfile=A($({},i.data()),{id:i.id,uid:i.id}):this.profileError="Perfil no encontrado"}catch(e){console.error("Error al cargar perfil:",e),this.profileError="Error al cargar el perfil"}finally{this.isLoadingProfile=!1}})}closeProfileModal(){this.showProfileModal=!1,this.selectedProfile=null,this.profileError=null}navigateToMessages(t){this.closeProfileModal(),this.router.navigate(["/messages"],{queryParams:{recipient:t}})}markMessagesAsSeen(t){return v(this,null,function*(){let e=w(this.firestore,"conversations",t,"messages"),i=yield Oe(k(e)),r=X(this.firestore);i.forEach(l=>{l.data().seenBy?.includes(this.currentUser.uid)||r.update(l.ref,{seenBy:xe(this.currentUser.uid)})}),yield r.commit()})}getDisplayName(t){return t.type==="team"?t.teamName:`${t.firstName} ${t.lastName}`}getProfileImage(t){return t.type==="team"?t.teamLogoUrl||"assets/team-default.png":t.profilePictureUrl||"assets/user-profile.jpg"}navigateToFeed(){this.router.navigate(["/feed"])}logout(){return v(this,null,function*(){try{yield this.authService.logout(),this.router.navigate(["/login"])}catch(t){console.error("Error al cerrar sesi\xF3n:",t)}})}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=oe({type:n,selectors:[["app-messages"]],decls:29,vars:11,consts:[[1,"landing-container"],[1,"header"],[1,"logo-section"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 800 800",1,"app-logo"],["fill","#f2ac29","d","M316.5,103.5C352.335,103.167 369.168,120.833 367,156.5C362.571,172.595 352.404,183.095 336.5,188C309.05,192.863 291.217,182.03 283,155.5C279.9,128.799 291.067,111.466 316.5,103.5Z"],["fill","#f2ac29","d","M342.5,213.5C346.03,212.989 349.196,213.656 352,215.5C359.492,253.629 367.492,291.629 376,329.5C425.01,359.183 474.01,388.849 523,418.5C558.874,404.232 594.874,390.232 631,376.5C637.322,383.777 640.156,392.11 639.5,401.5C599.833,417.25 560,432.583 520,447.5C463.85,414.091 407.85,380.425 352,346.5C343.274,304.476 334.44,262.476 325.5,220.5C326.779,218.854 328.445,217.687 330.5,217C334.686,216.05 338.686,214.884 342.5,213.5Z"],["fill","#f2ac29","d","M473.5,234.5C501.107,249.972 528.44,265.972 555.5,282.5C539.752,309.665 523.752,336.665 507.5,363.5C480.335,347.752 453.335,331.752 426.5,315.5C442.443,288.609 458.109,261.609 473.5,234.5Z"],["fill","#f2ac29","d","M365.5,397.5C366.552,397.351 367.552,397.517 368.5,398C398.351,425.351 428.351,452.518 458.5,479.5C458.72,518.485 458.72,557.485 458.5,596.5C455.763,597.031 453.096,597.864 450.5,599C419.848,613.91 389.014,628.41 358,642.5C330.503,637.1 303.003,631.767 275.5,626.5C275.794,617.88 277.461,609.546 280.5,601.5C281.333,601.167 282.167,600.833 283,600.5C306.809,605.306 330.643,609.973 354.5,614.5C379.828,602.836 405.162,591.169 430.5,579.5C431.955,550.513 432.455,521.513 432,492.5C410.549,471.795 388.549,451.795 366,432.5C343.243,450.469 320.743,468.803 298.5,487.5C270.203,486.841 241.87,486.175 213.5,485.5C195.667,465.167 177.833,444.833 160,424.5C159.333,423.5 159.333,422.5 160,421.5C161.793,418.705 163.96,416.205 166.5,414C170.324,410.921 174.324,408.088 178.5,405.5C195.029,423.196 211.029,441.363 226.5,460C247.833,460.667 269.167,460.667 290.5,460C315.571,439.148 340.571,418.315 365.5,397.5Z"],[1,"app-name"],[1,"header-actions"],["type","text","placeholder","Buscar...",1,"search-bar",3,"ngModelChange","input","ngModel"],["class","search-results",4,"ngIf"],[1,"messages-btn",3,"click"],["class","user-profile",3,"click",4,"ngIf"],[1,"messages-content"],[1,"messages-container"],[1,"conversations-list"],[1,"loading"],["class","messages-view",4,"ngIf"],[1,"no-conversation-selected"],["class","profile-overlay",3,"click",4,"ngIf"],["class","confirmation-overlay",4,"ngIf"],[1,"search-results"],["class","search-result-item",3,"click",4,"ngFor","ngForOf"],[1,"search-result-item",3,"click"],["alt","Profile",1,"search-result-img",3,"src"],[1,"search-result-type"],[1,"user-profile",3,"click"],["alt","User Profile",1,"profile-pic",3,"src"],[1,"username"],["class","profile-menu",3,"click",4,"ngIf"],[1,"profile-menu",3,"click"],[1,"menu-item",3,"click"],[1,"menu-icon"],[1,"fas","fa-user"],[1,"fas","fa-sign-out-alt"],[1,"conversation-item",3,"selected"],[1,"no-conversations"],[1,"conversation-item",3,"click"],["alt","Profile",1,"conversation-photo",3,"src"],[1,"conversation-info"],[1,"conversation-name"],[1,"conversation-preview"],[1,"conversation-meta"],[1,"conversation-time"],[1,"unread-count"],[1,"messages-view"],[1,"messages-scroll"],[1,"message-input"],["placeholder","Escribe un mensaje...",3,"ngModelChange","keyup.enter","ngModel"],[3,"click"],[1,"date-header"],[1,"message"],[1,"message-content"],[1,"message-time"],[4,"ngIf"],[1,"tick"],[1,"profile-overlay",3,"click"],[1,"profile-modal",3,"click"],[1,"close-btn",3,"click"],["class","loading-profile",4,"ngIf"],["class","profile-details",4,"ngIf"],["class","error-message",4,"ngIf"],[1,"loading-profile"],[1,"spinner"],[1,"profile-details"],["alt","Foto perfil",1,"profile-img-large",3,"src"],[1,"profile-name"],[1,"profile-sport"],["class","send-message-btn",3,"click",4,"ngIf"],["class","delete-user-btn",3,"click",4,"ngIf"],[1,"team-categories"],["class","category-card",4,"ngFor","ngForOf"],[1,"category-card"],[1,"send-message-btn",3,"click"],[1,"delete-user-btn",3,"click"],[1,"error-message"],[1,"confirmation-overlay"],[1,"confirmation-modal",3,"click"],[1,"confirmation-buttons"],[1,"cancel-btn",3,"click"],[1,"confirm-btn",3,"click"]],template:function(e,i){if(e&1&&(s(0,"div",0)(1,"header",1)(2,"div",2),te(),s(3,"svg",3),O(4,"path",4)(5,"path",5)(6,"path",6)(7,"path",7),o(),ne(),s(8,"span",8),c(9,"TeamUp"),o()(),s(10,"div",9)(11,"input",10),Y("ngModelChange",function(l){return Z(i.searchQuery,l)||(i.searchQuery=l),l}),m("input",function(){return i.onSearchInput()}),o(),g(12,Ie,2,1,"div",11),s(13,"button",12),m("click",function(){return i.navigateToFeed()}),c(14,"Feed"),o()(),g(15,Ue,5,3,"div",13),o(),s(16,"main",14)(17,"div",15)(18,"div",16)(19,"h2"),c(20,"Conversaciones"),o(),g(21,ze,3,1),S(22,"async"),g(23,Le,2,0,"p",17),o(),g(24,Qe,8,4,"div",18)(25,We,3,0,"div",19)(26,Ye,3,1,"div",19),o()(),g(27,st,7,3,"div",20)(28,at,11,2,"div",21),o()),e&2){let r;a(11),H("ngModel",i.searchQuery),a(),p("ngIf",i.searchResults.length>0),a(3),p("ngIf",i.currentUser),a(6),P((r=G(22,9,i.conversations$))?21:23,r),a(3),p("ngIf",i.selectedConversation),a(),P(!i.selectedConversation&&!i.recipientId?25:-1),a(),P(i.recipientId&&!i.selectedConversation?26:-1),a(),p("ngIf",i.showProfileModal),a(),p("ngIf",i.showConfirmationModal)}},dependencies:[ge,ae,ce,le,pe,de,ve,ue,Ce,he,_e],styles:['*[_ngcontent-%COMP%]{font-family:Zain,sans-serif}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1rem 2rem;background-color:#fffbf5;box-shadow:0 4px 20px #0907046b;position:sticky;top:0;z-index:1000}.header[_ngcontent-%COMP%]   .logo-section[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.header[_ngcontent-%COMP%]   .logo-section[_ngcontent-%COMP%]   .app-logo[_ngcontent-%COMP%]{height:50px}.header[_ngcontent-%COMP%]   .logo-section[_ngcontent-%COMP%]   .app-name[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#f2ac29}.header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;position:relative}.header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .search-bar[_ngcontent-%COMP%]{padding:.5rem 1rem;border:1px solid #ddd;border-radius:20px;min-width:250px;font-size:.9rem;transition:all .3s}.header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .search-bar[_ngcontent-%COMP%]:focus{outline:none;border-color:#f2ac29;box-shadow:0 0 0 2px #f2ac2933}.header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .search-results[_ngcontent-%COMP%]{position:absolute;top:100%;left:0;right:0;background:#fff;border:1px solid #ddd;border-radius:8px;box-shadow:0 4px 12px #00000026;z-index:1000;max-height:400px;overflow-y:auto;margin-top:5px;animation:_ngcontent-%COMP%_fadeIn .2s ease-out}.header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .search-results[_ngcontent-%COMP%]   .search-result-item[_ngcontent-%COMP%]{display:flex;align-items:center;padding:.75rem 1rem;cursor:pointer;transition:background-color .2s;border-bottom:1px solid #f5f5f5}.header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .search-results[_ngcontent-%COMP%]   .search-result-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .search-results[_ngcontent-%COMP%]   .search-result-item[_ngcontent-%COMP%]:hover{background-color:#f2ac291a}.header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .search-results[_ngcontent-%COMP%]   .search-result-item[_ngcontent-%COMP%]   .search-result-img[_ngcontent-%COMP%]{width:36px;height:36px;border-radius:50%;margin-right:12px;object-fit:cover;border:2px solid #f2ac29}.header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .search-results[_ngcontent-%COMP%]   .search-result-item[_ngcontent-%COMP%]   .search-result-type[_ngcontent-%COMP%]{margin-left:auto;font-size:.75rem;color:#666;padding:.25rem .5rem;border-radius:12px;background-color:#f5f5f5;text-transform:capitalize}.header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .search-results[_ngcontent-%COMP%]   .search-result-item[_ngcontent-%COMP%]   .search-result-type.player[_ngcontent-%COMP%]{background-color:#e3f2fd;color:#1976d2}.header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .search-results[_ngcontent-%COMP%]   .search-result-item[_ngcontent-%COMP%]   .search-result-type.team[_ngcontent-%COMP%]{background-color:#e8f5e9;color:#388e3c}.header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .messages-btn[_ngcontent-%COMP%]{padding:.5rem 1.5rem;background-color:#f2ac29;color:#fff;border:none;border-radius:20px;cursor:pointer;font-weight:600;transition:background-color .3s}.header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .messages-btn[_ngcontent-%COMP%]:hover{background-color:#c7922e}.header[_ngcontent-%COMP%]   .user-profile[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;gap:.5rem;padding:.5rem .8rem;border-radius:20px;cursor:pointer;transition:background-color .3s}.header[_ngcontent-%COMP%]   .user-profile[_ngcontent-%COMP%]:hover{background-color:#f2ac291a}.header[_ngcontent-%COMP%]   .user-profile[_ngcontent-%COMP%]   .profile-pic[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;object-fit:cover;border:2px solid #f2ac29}.header[_ngcontent-%COMP%]   .user-profile[_ngcontent-%COMP%]   .username[_ngcontent-%COMP%]{font-weight:600;color:#333}.header[_ngcontent-%COMP%]   .user-profile[_ngcontent-%COMP%]   .profile-menu[_ngcontent-%COMP%]{position:absolute;top:100%;right:0;background-color:#fffbf5;border-radius:8px;box-shadow:0 4px 20px #0907046b;min-width:220px;z-index:1000;margin-top:10px;overflow:hidden;animation:_ngcontent-%COMP%_fadeIn .2s ease-out forwards}.header[_ngcontent-%COMP%]   .user-profile[_ngcontent-%COMP%]   .profile-menu[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]{padding:.75rem 1.25rem;display:flex;align-items:center;gap:.75rem;transition:all .3s;color:#333;font-size:.95rem}.header[_ngcontent-%COMP%]   .user-profile[_ngcontent-%COMP%]   .profile-menu[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]:hover{background-color:#f2ac291a;color:#f2ac29}.header[_ngcontent-%COMP%]   .user-profile[_ngcontent-%COMP%]   .profile-menu[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]   .menu-icon[_ngcontent-%COMP%]{width:20px;text-align:center;color:#f2ac29}.header[_ngcontent-%COMP%]   .user-profile[_ngcontent-%COMP%]   .profile-menu[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]:last-child{color:#e74c3c}.header[_ngcontent-%COMP%]   .user-profile[_ngcontent-%COMP%]   .profile-menu[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]:last-child:hover{background-color:#fef0f0}.header[_ngcontent-%COMP%]   .user-profile[_ngcontent-%COMP%]   .profile-menu[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]:last-child   .menu-icon[_ngcontent-%COMP%]{color:#e74c3c}.profile-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background-color:#000000b3;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);display:flex;justify-content:center;align-items:center;z-index:1000;animation:_ngcontent-%COMP%_fadeIn .3s ease-out}.profile-overlay[_ngcontent-%COMP%]   .profile-modal[_ngcontent-%COMP%]{background-color:#fffbf5;border-radius:12px;width:90%;max-width:600px;max-height:90vh;overflow-y:auto;position:relative;box-shadow:0 10px 25px #0907046b;padding:2rem;animation:_ngcontent-%COMP%_modalSlideUp .3s ease-out}.profile-overlay[_ngcontent-%COMP%]   .profile-modal[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{position:absolute;top:15px;right:15px;background:none;border:none;font-size:24px;cursor:pointer;color:#666;width:40px;height:40px;display:flex;align-items:center;justify-content:center;border-radius:50%}.profile-overlay[_ngcontent-%COMP%]   .profile-modal[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{background-color:#f2ac291a;color:#f2ac29}.profile-overlay[_ngcontent-%COMP%]   .profile-modal[_ngcontent-%COMP%]   .loading-profile[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:2rem}.profile-overlay[_ngcontent-%COMP%]   .profile-modal[_ngcontent-%COMP%]   .loading-profile[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid #f3f3f3;border-top:4px solid #f2ac29;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:1rem}.profile-overlay[_ngcontent-%COMP%]   .profile-modal[_ngcontent-%COMP%]   .loading-profile[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#333}.profile-overlay[_ngcontent-%COMP%]   .profile-modal[_ngcontent-%COMP%]   .profile-details[_ngcontent-%COMP%]{text-align:center}.profile-overlay[_ngcontent-%COMP%]   .profile-modal[_ngcontent-%COMP%]   .profile-details[_ngcontent-%COMP%]   .profile-img-large[_ngcontent-%COMP%]{width:120px;height:120px;border-radius:50%;object-fit:cover;border:4px solid #f2ac29;margin-bottom:1.5rem}.profile-overlay[_ngcontent-%COMP%]   .profile-modal[_ngcontent-%COMP%]   .profile-details[_ngcontent-%COMP%]   .profile-name[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:.5rem;color:#333;font-weight:700}.profile-overlay[_ngcontent-%COMP%]   .profile-modal[_ngcontent-%COMP%]   .profile-details[_ngcontent-%COMP%]   .profile-sport[_ngcontent-%COMP%]{font-size:1.1rem;margin-bottom:1.5rem;color:#333;font-weight:600}.profile-overlay[_ngcontent-%COMP%]   .profile-modal[_ngcontent-%COMP%]   .profile-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:.8rem;color:#555;text-align:left;padding:0 1rem}.profile-overlay[_ngcontent-%COMP%]   .profile-modal[_ngcontent-%COMP%]   .profile-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#333;font-weight:600}.profile-overlay[_ngcontent-%COMP%]   .profile-modal[_ngcontent-%COMP%]   .profile-details[_ngcontent-%COMP%]   .send-message-btn[_ngcontent-%COMP%]{padding:.75rem 1.5rem;background-color:#f2ac29;color:#fff;border:none;border-radius:6px;font-size:1rem;font-weight:600;cursor:pointer;transition:background-color .3s;margin-top:1.5rem}.profile-overlay[_ngcontent-%COMP%]   .profile-modal[_ngcontent-%COMP%]   .profile-details[_ngcontent-%COMP%]   .send-message-btn[_ngcontent-%COMP%]:hover{background-color:#c7922e}.profile-overlay[_ngcontent-%COMP%]   .profile-modal[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:#e74c3c;text-align:center;padding:1rem;background-color:#fef0f0;border-radius:4px;margin:1rem 0;font-weight:600}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_modalSlideUp{0%{transform:translateY(20px);opacity:0}to{transform:translateY(0);opacity:1}}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.landing-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-height:100vh;background:#f2ac29;background-image:url(/fondo.jpg);background-size:cover;background-position:center;background-repeat:no-repeat}.messages-content[_ngcontent-%COMP%]{flex:1;background-color:#fffbf5e6}.messages-container[_ngcontent-%COMP%]{display:flex;height:87vh}.conversations-list[_ngcontent-%COMP%]{width:300px;border-right:1px solid #e0e0e0;overflow-y:auto;background-color:#fffbf5;border-radius:8px 0 0 8px}.conversations-list[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{padding:15px;margin:0;font-size:1.2rem;color:#333;background-color:#fff;border-bottom:1px solid #e0e0e0;font-weight:600}.conversation-item[_ngcontent-%COMP%]{display:flex;padding:12px 15px;cursor:pointer;align-items:center;border-bottom:1px solid #e0e0e0;background-color:#fff;transition:all .3s}.conversation-item[_ngcontent-%COMP%]:hover{background-color:#f2ac291a}.conversation-item.selected[_ngcontent-%COMP%]{background-color:#f2ac2933}.conversation-photo[_ngcontent-%COMP%]{width:45px;height:45px;border-radius:50%;margin-right:12px;object-fit:cover;border:2px solid #f2ac29}.conversation-info[_ngcontent-%COMP%]{flex:1;min-width:0}.conversation-name[_ngcontent-%COMP%]{font-weight:600;display:block;color:#333;margin-bottom:3px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.conversation-preview[_ngcontent-%COMP%]{font-size:.85rem;color:#666;display:block;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.conversation-meta[_ngcontent-%COMP%]{text-align:right;font-size:.8rem;margin-left:10px;display:flex;flex-direction:column;align-items:flex-end}.conversation-time[_ngcontent-%COMP%]{color:#888;margin-bottom:5px}.unread-count[_ngcontent-%COMP%]{background-color:#f2ac29;color:#fff;border-radius:50%;width:20px;height:20px;display:inline-flex;align-items:center;justify-content:center;font-size:.7rem;font-weight:600}.no-conversations[_ngcontent-%COMP%], .loading[_ngcontent-%COMP%]{padding:15px;color:#666;text-align:center}.messages-view[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;background-color:#fffbf5;border-radius:0 8px 8px 0}.messages-scroll[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:20px;background-color:#e5ddd5;background-repeat:repeat}.date-header[_ngcontent-%COMP%]{text-align:center;margin:1rem 0;color:#666;font-size:.9rem;position:relative}.date-header[_ngcontent-%COMP%]:before, .date-header[_ngcontent-%COMP%]:after{content:"";display:inline-block;width:30%;height:1px;background-color:#ddd;position:absolute;top:50%}.date-header[_ngcontent-%COMP%]:before{left:0}.date-header[_ngcontent-%COMP%]:after{right:0}.message[_ngcontent-%COMP%]{display:flex;margin-bottom:15px;max-width:70%}.message.sent[_ngcontent-%COMP%]{margin-left:auto;flex-direction:row-reverse}.message.sent[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]{background-color:#dcf8c6;border-top-right-radius:0;border-top-left-radius:15px}.message-content[_ngcontent-%COMP%]{background-color:#fff;padding:10px 15px;border-radius:0 15px 15px;box-shadow:0 1px 1px #0000001a;position:relative}.message-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;word-break:break-word}.message-time[_ngcontent-%COMP%]{font-size:.7rem;color:#666;display:block;text-align:right;margin-top:5px}.message-input[_ngcontent-%COMP%]{display:flex;padding:15px;border-top:1px solid #e0e0e0;background-color:#fff}.message-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;padding:10px 15px;border:1px solid #e0e0e0;border-radius:20px;margin-right:10px;outline:none;font-size:1rem}.message-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#f2ac29}.message-input[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 20px;background-color:#f2ac29;color:#fff;border:none;border-radius:20px;cursor:pointer;font-size:1rem;font-weight:600;transition:background-color .3s}.message-input[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#c7922e}.message-input[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}.no-conversation-selected[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;justify-content:center;background-color:#fffbf5;border-radius:0 8px 8px 0}.no-conversation-selected[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;font-size:1.1rem}']})};export{we as MessagesComponent};
